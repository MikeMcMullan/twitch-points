!function(t,e){"object"==typeof exports&&exports?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Mustache={})}(this,function(t){function e(t){return"function"==typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t,e){return f.call(t,e)}function o(t){return!r(g,t)}function i(t){return String(t).replace(/[&<>"'\/]/g,function(t){return w[t]})}function s(e,r){function i(){if(f&&!g)for(;u.length;)delete h[u.pop()];else u=[];f=!1,g=!1}function s(t){if("string"==typeof t&&(t=t.split(b,2)),!d(t)||2!==t.length)throw new Error("Invalid tags: "+t);w=new RegExp(n(t[0])+"\\s*"),x=new RegExp("\\s*"+n(t[1])),C=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var p=[],h=[],u=[],f=!1,g=!1,w,x,C;s(r||t.tags);for(var E=new c(e),j,U,T,P,A,D;!E.eos();){if(j=E.pos,T=E.scanUntil(w))for(var B=0,R=T.length;R>B;++B)P=T.charAt(B),o(P)?u.push(h.length):g=!0,h.push(["text",P,j,j+1]),j+=1,"\n"===P&&i();if(!E.scan(w))break;if(f=!0,U=E.scan(m)||"name",E.scan(v),"="===U?(T=E.scanUntil(y),E.scan(y),E.scanUntil(x)):"{"===U?(T=E.scanUntil(C),E.scan(k),E.scanUntil(x),U="&"):T=E.scanUntil(x),!E.scan(x))throw new Error("Unclosed tag at "+E.pos);if(A=[U,T,j,E.pos],h.push(A),"#"===U||"^"===U)p.push(A);else if("/"===U){if(D=p.pop(),!D)throw new Error('Unopened section "'+T+'" at '+j);if(D[1]!==T)throw new Error('Unclosed section "'+D[1]+'" at '+j)}else"name"===U||"{"===U||"&"===U?g=!0:"="===U&&s(T)}if(D=p.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return l(a(h))}function a(t){for(var e=[],n,r,o=0,i=t.length;i>o;++o)n=t[o],n&&("text"===n[0]&&r&&"text"===r[0]?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function l(t){for(var e=[],n=e,r=[],o,i,s=0,a=t.length;a>s;++s)switch(o=t[s],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":i=r.pop(),i[5]=o[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(o)}return e}function c(t){this.string=t,this.tail=t,this.pos=0}function p(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function h(){this.cache={}}var u=Object.prototype.toString,d=Array.isArray||function(t){return"[object Array]"===u.call(t)},f=RegExp.prototype.test,g=/\S/,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},v=/\s*/,b=/\s+/,y=/\s*=/,k=/\s*\}/,m=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},c.prototype.scanUntil=function(t){var e=this.tail.search(t),n;switch(e){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=n.length,n},p.prototype.push=function(t){return new p(t,this)},p.prototype.lookup=function(t){var n=this.cache,r;if(t in n)r=n[t];else{for(var o=this,i,s;o;){if(t.indexOf(".")>0)for(r=o.view,i=t.split("."),s=0;null!=r&&s<i.length;)r=r[i[s++]];else"object"==typeof o.view&&(r=o.view[t]);if(null!=r)break;o=o.parent}n[t]=r}return e(r)&&(r=r.call(this.view)),r},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(t,e){var n=this.cache,r=n[t];return null==r&&(r=n[t]=s(t,e)),r},h.prototype.render=function(t,e,n){var r=this.parse(t),o=e instanceof p?e:new p(e);return this.renderTokens(r,o,n,t)},h.prototype.renderTokens=function(n,r,o,i){function s(t){return l.render(t,r,o)}for(var a="",l=this,c,p,h=0,u=n.length;u>h;++h)switch(c=n[h],c[0]){case"#":if(p=r.lookup(c[1]),!p)continue;if(d(p))for(var f=0,g=p.length;g>f;++f)a+=this.renderTokens(c[4],r.push(p[f]),o,i);else if("object"==typeof p||"string"==typeof p)a+=this.renderTokens(c[4],r.push(p),o,i);else if(e(p)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");p=p.call(r.view,i.slice(c[3],c[5]),s),null!=p&&(a+=p)}else a+=this.renderTokens(c[4],r,o,i);break;case"^":p=r.lookup(c[1]),(!p||d(p)&&0===p.length)&&(a+=this.renderTokens(c[4],r,o,i));break;case">":if(!o)continue;p=e(o)?o(c[1]):o[c[1]],null!=p&&(a+=this.renderTokens(this.parse(p),r,o,p));break;case"&":p=r.lookup(c[1]),null!=p&&(a+=p);break;case"name":p=r.lookup(c[1]),null!=p&&(a+=t.escape(p));break;case"text":a+=c[1]}return a},t.name="mustache.js",t.version="1.0.0",t.tags=["{{","}}"];var x=new h;t.clearCache=function(){return x.clearCache()},t.parse=function(t,e){return x.parse(t,e)},t.render=function(t,e,n){return x.render(t,e,n)},t.to_html=function(n,r,o,i){var s=t.render(n,r,o);return e(i)?void i(s):s},t.escape=i,t.Scanner=c,t.Context=p,t.Writer=h}),+function($){"use strict";function t(t){t&&3===t.which||($(r).remove(),$(o).each(function(){var n=$(this),r=e(n),o={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=$.Event("hide.bs.dropdown",o)),t.isDefaultPrevented()||(n.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function e(t){var e=t.attr("data-target");e||(e=t.attr("href"),e=e&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&$(e);return n&&n.length?n:t.parent()}function n(t){return this.each(function(){var e=$(this),n=e.data("bs.dropdown");n||e.data("bs.dropdown",n=new i(this)),"string"==typeof t&&n[t].call(e)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',i=function(t){$(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.2",i.prototype.toggle=function(n){var r=$(this);if(!r.is(".disabled, :disabled")){var o=e(r),i=o.hasClass("open");if(t(),!i){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",t);var s={relatedTarget:this};if(o.trigger(n=$.Event("show.bs.dropdown",s)),n.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var n=$(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var r=e(n),i=r.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&r.find(o).trigger("focus"),n.trigger("click");var s=" li:not(.divider):visible a",a=r.find('[role="menu"]'+s+', [role="listbox"]'+s);if(a.length){var l=a.index(t.target);38==t.which&&l>0&&l--,40==t.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var s=$.fn.dropdown;$.fn.dropdown=n,$.fn.dropdown.Constructor=i,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=s,this},$(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,i.prototype.toggle).on("keydown.bs.dropdown.data-api",o,i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',i.prototype.keydown)}(jQuery),function($,t,e){var n=function(){this.element=$("#check-points"),this.element.on("click",$.proxy(this.checkPoints,this))};n.prototype.disableButton=function(){this.element.val("Checking..."),this.element.attr("disabled","disabled"),this.element.toggleClass("working")},n.prototype.enableButton=function(){this.element.val("Check Points"),this.element.attr("disabled",!1),this.element.toggleClass("working")},n.prototype.renderPoints=function(t){var e=$("#point-table-render").first().html(),n=Mustache.render(e,{handle:t.handle,minutesOnline:t.minutes_online,points:t.points}),r=$(".points-results-table");return 0===r.length?void $("#points-panel").append(n):void r.replaceWith(n)},n.prototype.ajaxDone=function(t){this.renderPoints(t),this.enableButton()},n.prototype.ajaxFail=function(){this.enableButton(),alert("Unable to find handle.")},n.prototype.checkPoints=function(t){var e=$(t.target),n=e.parent().find("#handle").val();e.hasClass("working")||(this.disableButton(),$.ajax({url:"/api/points",dataType:"json",type:"GET",data:{handle:n}}).done($.proxy(this.ajaxDone,this)).fail($.proxy(this.ajaxFail,this)),t.preventDefault(e))}}(jQuery,window,void 0);